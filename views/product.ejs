<!-- views/product.ejs -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="/main.css" rel="stylesheet">
    <title>Products</title>
</head>
<body>
<div class="flex flex-col min-h-screen bg-amber-50 bg-cover">
    <nav class="flex items-center justify-between p-3 w-full" style="background-color: #041562;">
        <div class="flex items-center space-x-4">
            <img src="/images/logo.png" class="h-14 w-auto" alt="Logo"> 
        </div>
        <div class="flex items-center justify-center space-x-4">
            <a href="/fashion" class="p-4 text-white text-xl">Fashion</a>
            <a href="/electronics" class="p-4 text-white text-xl">Electronics</a>
            <a href="/lifestyle" class="p-4 text-white text-xl">Lifestyle</a>
            <a href="/recreation" class="p-4 text-white text-xl">Recreation</a>
            <a href="/collectibles" class="p-4 text-white text-xl">Collectibles</a>
            <a href="/resources" class="p-4 text-white text-xl">Resources</a>
            <a href="/others" class="pl-4 pr-3 py-4 text-white text-xl">Others</a>
            <a href="/profile" class="py-3"><img src="https://img.icons8.com/?size=100&id=85050&format=png&color=FFFFFF" alt="Profile Icon" class="h-10 w-10"></a>
            <a href="/profile/favorites" class="py-3"><img src="https://img.icons8.com/?size=100&id=85038&format=png&color=FFFFFF" alt="Favorites Icon" class="h-10 w-10"></a>
            <button class="px-4 py-2 mr-5 text-white rounded w-20" onclick="window.location.href='/listProduct'" style="background-color: #DA1212">List</button> 
        </div>
    </nav>
        <!-- Footer -->
        <footer class="mt-auto w-full text-white py-4 flex flex-col items-center" style="background-color: #0d4aa6;">
            <div class="w-full flex justify-between items-center px-10">
                <h1 class="text-2xl md:text-3xl"> SMart</h1>
                <div class="flex space-x-4 pr-12">
                    <a href="/" class="text-white text-xl">About us</a>
                    <a href="/" class="text-white text-xl">Contact us</a>
                </div>
            </div>
            <div class="w-full flex justify-between px-10 mt-4">
                <div class="flex space-x-4">
                    <a href="https://twitter.com" target="_blank">
                        <img src="https://img.icons8.com/?size=100&id=fJp7hepMryiw&format=png&color=FFFFFF" alt="Twitter Icon" class="h-10 w-10">
                    </a>
                    <a href="https://instagram.com" target="_blank">
                        <img src="https://img.icons8.com/?size=100&id=32292&format=png&color=FFFFFF" alt="Instagram Icon" class="h-10 w-10">
                    </a>
                    <a href="https://facebook.com" target="_blank">
                        <img src="https://img.icons8.com/?size=100&id=118467&format=png&color=FFFFFF" alt="Facebook Icon" class="h-10 w-10">
                    </a>
                    <a href="https://linkedin.com" target="_blank">
                        <img src="https://img.icons8.com/?size=100&id=8808&format=png&color=FFFFFF" alt="LinkedIn Icon" class="h-10 w-10">
                    </a>
                </div>
            </div>
            <br>
            <p class="text-xs">&copy; 2024 SMart. All rights reserved</p>
    
        </footer>
        <!-- End of footer -->

</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    function deleteArticle(id) {
        fetch(`/author/delete-article/${id}`, { method: 'DELETE' })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.reload();
                } else {
                    alert('Error deleting article');
                }
            });
    }

    function publishArticle(id) {
        fetch(`/author/publish-article/${id}`, { method: 'POST' })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.reload();
                } else {
                    alert('Error publishing article');
                }
            });
    }

    $(".logoutBtn").click(function () {
        alert("Logged Out");
    });

    function changeTextColor(id) {
        const elements = document.querySelectorAll('.cursor-pointer');
        elements.forEach(el => {
            el.classList.remove('red');
            el.classList.remove('underline');
            el.classList.add('text-black');
        });
        document.getElementById(id).classList.remove('text-black');
        document.getElementById(id).classList.add('red');
        document.getElementById(id).classList.add('underline');

        if(id == "listings") {
            document.getElementById("listingsContent").classList.remove('hidden');
            document.getElementById("reviewsContent").classList.add('hidden');
            document.getElementById("favoritesContent").classList.add('hidden');
        } else if(id == "reviews") {
            document.getElementById("reviewsContent").classList.remove('hidden');
            document.getElementById("listingsContent").classList.add('hidden');
            document.getElementById("favoritesContent").classList.add('hidden');
        } else if (id == "favorites") {
            document.getElementById("favoritesContent").classList.remove('hidden');
            document.getElementById("reviewsContent").classList.add('hidden');
            document.getElementById("listingsContent").classList.add('hidden');
        }
    }

    function changeToInput(id) {
        if(id == "name") {
            const editIcons = document.querySelectorAll('.edit-icon');
            editIcons[0].classList.add('hidden');
            var name = document.getElementById("name");
            var text = name.innerText;
            var input = document.createElement("input");
            input.className = id.className; // Preserve the same styling
            input.value = text;
            input.onblur = function() { // Change back to <p> on blur
                changeToParagraph(input, id);
            };

            name.replaceWith(input);
            input.focus();
        } else if(id == "description") {
            const editIcons = document.querySelectorAll('.edit-icon');
            editIcons[2].classList.add('hidden');
            var desc = document.getElementById("description");
            var text = desc.innerText;
            var textarea = document.createElement("textArea");
            textarea.className = id.className; // Preserve the same styling
            textarea.value = text;
            textarea.rows = 5;// Set the number of rows
            textarea.cols = 66; // Set the number of columns
            textarea.onblur = function() { // Change back to <p> on blur
                changeToParagraph(textarea, id);
            };

            desc.replaceWith(textarea);
            textarea.focus();
        }
    }

    function changeToParagraph(input, id) {
        const editIcons = document.querySelectorAll('.edit-icon');
        editIcons.forEach(icon => icon.classList.remove('hidden'));
        var text = input.value;
        var pElement = document.createElement("p");
        pElement.id = id;
        pElement.className = input.className; // Preserve the same styling
        pElement.innerText = text;
        input.replaceWith(pElement);
    }

    document.addEventListener('DOMContentLoaded', switchText);

    function switchText() {
        const listingsContent = document.getElementById('listingsContent');
        const listingsItems = listingsContent.querySelectorAll('.flex-cols');

        listingsItems.forEach((item, index) => {
            const transactionType = item.dataset.transactionType;
            const firstBubble = document.getElementById(`first-${index}`);
            const secondBubble = document.getElementById(`second-${index}`);
            
            if (firstBubble) {
                if (transactionType === "Free") {
                    firstBubble.innerHTML = '<p>Free</p>';
                } else if (transactionType === "Sell") {
                    firstBubble.innerHTML = '<p>Sell</p>';
                } else if (transactionType === "Trade") {
                    firstBubble.innerHTML = '<p>Trade</p>';
                }
            }
            
            if (secondBubble) {
                secondBubble.innerHTML = '<p>Exchange</p>';
            }
        });
    }

</script>
</body>
</html>
